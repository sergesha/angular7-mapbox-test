<app-map-toggles></app-map-toggles>
<p>
    map-view works!
    with id: {{id}}
</p>

<mgl-map style="height: 500px; border: solid 1px; "
         [style]="mapStyle"
         [zoom]="mapZoom"
         [center]="mapCenter"
         (load)="onLoad($event)"
         (click)="onClick($event)">
    <mgl-control
        mglNavigation
    ></mgl-control>
    <mgl-control
        mglGeolocate
        [trackUserLocation]="true"
        [showUserLocation]="true"
    ></mgl-control>
    <mgl-geojson-source
        id="markers-source"
        [data]="markersCollection$ | async"
    ></mgl-geojson-source>
    <mgl-layer
        id="markers-layer"
        source="markers-source"
        type="symbol"
        [layout]="{
            'text-field': '{message}',
            'text-size': 24,
            'text-transform': 'uppercase',
            'icon-image': '{icon}-15',
            'icon-size': 2,
            'text-offset': [0, 1.5],
            'icon-allow-overlap': true
        }"
        [paint]="{
            'text-color': '#f16624',
            'text-halo-color': '#fff',
            'text-halo-width': 2
        }"
        (click)="onClick($event)"
    ></mgl-layer>
    <!--TODO: cursorStyle-->
    <!--(mouseEnter)="cursorStyle = 'pointer'"-->
    <!--(mouseLeave)="cursorStyle = ''"-->
    <mgl-popup
        *ngIf="selectedPoint"
        [lngLat]="selectedPoint.geometry?.coordinates"
    >
        <span [innerHTML]="selectedPoint.properties?.description"></span>
    </mgl-popup>
</mgl-map>

<!--<mgl-geojson-source-->
<!--id="stations"-->
<!--[data]="'assets/stations.geojson'"-->
<!--[cluster]="true"-->
<!--[clusterMaxZoom]="14"-->
<!--[clusterRadius]="50"-->
<!--&gt;</mgl-geojson-source>-->
